(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1226:()=>{},9756:(i,t,e)=>{Promise.resolve().then(e.t.bind(e,347,23)),Promise.resolve().then(e.t.bind(e,5356,23)),Promise.resolve().then(e.bind(e,1613))},1613:(i,t,e)=>{"use strict";e.d(t,{default:()=>f});var n=e(5155),o=e(2115),a=e(4595),c=e(2666),s=e.n(c),r=e(1319),l=e(5521);function f(){let[i,t]=(0,o.useState)([]),e=(0,l.useRouter)();(0,o.useEffect)(()=>{let i=a.j.currentUser;if(!i)return;let e=(0,r.Ay)("wss://brewnet-api.fly.dev");return e.on("connect",()=>{e.emit("join",{userId:i.uid})}),e.on("notification",i=>{t(t=>[i,...t])}),(async()=>{try{let e=await fetch("http://localhost:5000/api/notifications/".concat(i.uid));if(e.ok){let i=await e.json();t(i.notifications)}}catch(i){console.error("Error fetching notifications:",i)}})(),()=>{e.disconnect()}},[]);let c=async i=>{try{await fetch("http://localhost:5000/api/notifications/".concat(i._id,"/read"),{method:"PUT"}),t(t=>t.filter(t=>t._id!==i._id)),"connection_request"===i.type&&e.push("/profile/".concat(i.fromUser.firebaseUid))}catch(i){console.error("Error handling notification:",i)}};return(0,n.jsx)("div",{className:s().notificationContainer,children:i.map(i=>(0,n.jsxs)("div",{className:s().notification,onClick:()=>c(i),children:["connection_request"===i.type&&(0,n.jsxs)("div",{className:s().notificationContent,children:[(0,n.jsx)("div",{className:s().notificationTitle,children:"New Connection Request!"}),(0,n.jsxs)("div",{className:s().notificationMessage,children:[i.fromUser.name," wants to connect with you"]}),(0,n.jsx)("div",{className:s().notificationTime,children:new Date(i.createdAt).toLocaleTimeString()})]}),"connection_accepted"===i.type&&(0,n.jsxs)("div",{className:s().notificationContent,children:[(0,n.jsx)("div",{className:s().notificationTitle,children:"Connection Accepted! \uD83C\uDF89"}),(0,n.jsxs)("div",{className:s().notificationMessage,children:["You are now connected with ",i.fromUser.name]}),(0,n.jsx)("div",{className:s().notificationTime,children:new Date(i.createdAt).toLocaleTimeString()})]})]},i._id))})}},4595:(i,t,e)=>{"use strict";e.d(t,{j:()=>c});var n=e(9904),o=e(4565);let a=(0,n.Wp)({apiKey:"AIzaSyD72HmBTrehu6RqAwfH14n37nbgSoSiF4c",authDomain:"brewnet-dd55e.firebaseapp.com",projectId:"brewnet-dd55e",storageBucket:"brewnet-dd55e.firebasestorage.app",messagingSenderId:"720864557324",appId:"1:720864557324:web:b7f4b2419dc12753503129"}),c=(0,o.xI)(a)},347:()=>{},2666:i=>{i.exports={notificationContainer:"Notifications_notificationContainer__I9ENV",notification:"Notifications_notification__VtIyp",slideIn:"Notifications_slideIn__X02R_",notificationContent:"Notifications_notificationContent__YDr4U",notificationTitle:"Notifications_notificationTitle__W_A3e",notificationMessage:"Notifications_notificationMessage__I5nVK",notificationTime:"Notifications_notificationTime__xJYAW"}},5356:i=>{i.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_d65c78"}}},i=>{var t=t=>i(i.s=t);i.O(0,[444,33,895,803,671,441,517,358],()=>t(9756)),_N_E=i.O()}]);