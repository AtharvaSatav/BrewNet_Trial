(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[29],{4228:(e,r,t)=>{Promise.resolve().then(t.bind(t,5240))},6046:(e,r,t)=>{"use strict";var s=t(6658);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},5240:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var s=t(5155),n=t(2115),a=t(6046),o=t(4595);let l=["Business and Startups","AI","Love","Friends","Networking","Consultancy","Creative Domain"];var i=t(9345);function d(){let e=(0,a.useRouter)(),[r,t]=(0,n.useState)(!0),[d,c]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),[b,m]=(0,n.useState)({name:"",gender:"",interests:[]});(0,n.useEffect)(()=>{(async()=>{let r=o.j.currentUser;if(!r){e.push("/login");return}try{let e=await fetch("http://localhost:5000/api/auth/user/".concat(r.uid));if(!e.ok)throw Error("Failed to fetch profile");let t=await e.json();m({name:t.user.name,gender:t.user.gender,interests:t.user.interests})}catch(e){h("Failed to load profile"),console.error(e)}finally{t(!1)}})()},[e]);let x=async r=>{r.preventDefault(),c(!0),h(null);try{let r=o.j.currentUser;if(!r)throw Error("Not authenticated");console.log("Sending profile update:",b);let t=await fetch("http://localhost:5000/api/auth/update-profile/".concat(r.uid),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!t.ok)throw Error("Failed to update profile");let s=await t.json();console.log("Update response:",s),e.push("/profile")}catch(e){console.error("Update error:",e),h(e instanceof Error?e.message:"Failed to update profile")}finally{c(!1)}},p=e=>{m(r=>({...r,interests:r.interests.includes(e)?r.interests.filter(r=>r!==e):[...r.interests,e]}))};return r?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-brown-600",children:"Loading profile..."})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-brown-100 to-brown-200 py-12 px-4",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-xl shadow-lg p-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsxs)("button",{onClick:()=>e.push("/discovery"),className:"text-brown-600 hover:text-brown-800 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"←"})," Back to Discovery"]}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-brown-900",children:"Edit Profile"})]}),u&&(0,s.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:u}),(0,s.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-brown-700",children:"Name"}),(0,s.jsx)("input",{type:"text",id:"name",value:b.name,onChange:e=>m(r=>({...r,name:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brown-500 focus:ring-brown-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"gender",className:"block text-sm font-medium text-brown-700",children:"Gender"}),(0,s.jsxs)("select",{id:"gender",value:b.gender,onChange:e=>m(r=>({...r,gender:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-brown-500 focus:ring-brown-500",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select gender"}),(0,s.jsx)("option",{value:"Male",children:"Male"}),(0,s.jsx)("option",{value:"Female",children:"Female"}),(0,s.jsx)("option",{value:"Prefer not to say",children:"Prefer not to say"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-brown-700 mb-2",children:"Interests"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:l.map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2 p-2 border rounded hover:bg-brown-50 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:b.interests.includes(e),onChange:()=>p(e),className:"rounded text-brown-600 focus:ring-brown-500"}),(0,s.jsx)("span",{className:"text-sm text-brown-700",children:e})]},e))})]}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>e.back(),className:"flex-1 px-4 py-2 border border-brown-600 text-brown-600 rounded-lg hover:bg-brown-50",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:d,className:"flex-1 px-4 py-2 bg-brown-600 text-white rounded-lg hover:bg-brown-700 disabled:opacity-50",children:d?"Saving...":"Save Changes"})]})]})]})})]})}},9345:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var s=t(5155),n=t(6046),a=t(4595),o=t(2115);function l(){let e=(0,n.useRouter)(),[r,t]=(0,o.useState)(!1);return(0,s.jsx)("nav",{className:"bg-white shadow-md",children:(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-3",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{onClick:()=>e.push("/discovery"),className:"text-2xl font-bold text-brown-900 cursor-pointer",children:"BrewNet"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:()=>t(!r),className:"px-4 py-2 bg-brown-600 text-white rounded-lg hover:bg-brown-700 transition-colors",children:"My Profile"}),r&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10",children:[(0,s.jsx)("button",{onClick:()=>{t(!1),e.push("/profile")},className:"block w-full text-left px-4 py-2 hover:bg-brown-50",children:"View Profile"}),(0,s.jsx)("button",{onClick:()=>{t(!1),e.push("/profile/edit")},className:"block w-full text-left px-4 py-2 hover:bg-brown-50",children:"Edit Profile"}),(0,s.jsx)("button",{onClick:async()=>{await a.j.signOut(),e.push("/login")},className:"block w-full text-left px-4 py-2 hover:bg-brown-50 text-red-600",children:"Sign Out"})]})]})]})})})}},4595:(e,r,t)=>{"use strict";t.d(r,{j:()=>o});var s=t(9904),n=t(4565);let a=(0,s.Wp)({apiKey:"AIzaSyD72HmBTrehu6RqAwfH14n37nbgSoSiF4c",authDomain:"brewnet-dd55e.firebaseapp.com",projectId:"brewnet-dd55e",storageBucket:"brewnet-dd55e.firebasestorage.app",messagingSenderId:"720864557324",appId:"1:720864557324:web:b7f4b2419dc12753503129"}),o=(0,n.xI)(a)}},e=>{var r=r=>e(e.s=r);e.O(0,[895,803,441,517,358],()=>r(4228)),_N_E=e.O()}]);